mixin  generateSubContent(content)
  - let miniContent = content.replace(/<\/?(b|i|a)>/g, '').replace(/<a.*>/g,'').slice(0,150) 
  - miniContent += miniContent.length < 150 ? '...' : ''
  p !{miniContent}

mixin storyCard(id, title, content, createdAt, coverImage)
  div.card(target_url=`/blogPage/${id}`) 
    .author-profile-div
      .author-profile-icon
        img.author-avatar(src= profileAvatar)
      .author-info
        #author-name= profileName
        - const [,month,date,year] = new Date(createdAt).toString().split(' ');
        -timeStamp= `${month} ${date}, ${year}`
        .story-date #{timeStamp}
    if coverImage    
      div#coverImage
        img(src= coverImage, alt="coverImage")
    .story-title= title
    div.content
      +generateSubContent(content)

doctype html
html
  head
    meta(charset='UTF-8')
    meta(name='viewport' content='width=device-width, initial-scale=1.0')
    title Express | Stories
    link(rel="stylesheet", href="/css/normalize.css")
    link(rel="stylesheet", href="/css/header.css")
    link(rel="stylesheet", href="/css/profile.css")
    script(src="/js/header.js")
    script(src="/js/profile.js")
  body 
    include ./includes/header.pug
    div.container
      .profile-div
        .info
          #name= profileName
          .bio= bio
        .profile-icon
          img.author-avatar(src= profileAvatar)
      .optionBar
      //-   div Profile
      .card-container
        each story in stories
          - const paragraph = story.content.find(data=> data.type ==='paragraph')
          - const content = paragraph ? paragraph.data.text : ''
          +storyCard(story.storyID, story.title, content, story.lastModified, story.coverImage)
        else
          .emptyMessage #{profileName} hasnâ€™t been active on Medium yet. Check back later to see their stories, claps, and highlights.
